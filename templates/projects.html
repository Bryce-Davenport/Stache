{% extends "base.html" %}

{% block title %}Stache – Projects{% endblock %}

{% block content %}
    <!-- Hero / header -->
    <section class="hero">
        <h1>Projects</h1>
        <p class="tagline">
            Track gear-related projects, repairs, and decluttering tasks so nothing falls through the cracks.
        </p>

        <div class="hero-actions">
            <!-- Row 1: status filter -->
            <div style="margin-bottom: 0.75rem;">
                <form method="GET"
                      action="{{ url_for('projects') }}"
                      style="display: inline-flex; align-items: center; gap: 0.5rem;">
                    <label for="status" style="font-size: 0.9rem;">Show:</label>

                    <select id="status"
                            name="status"
                            class="input"
                            onchange="this.form.submit()">
                        <option value="all"
                            {% if status_filter == 'all' %}selected{% endif %}>
                            All projects
                        </option>
                        <option value="in-progress"
                            {% if status_filter == 'in-progress' %}selected{% endif %}>
                            In progress
                        </option>
                        <option value="completed"
                            {% if status_filter == 'completed' %}selected{% endif %}>
                            Completed
                        </option>
                    </select>
                </form>
            </div>

            <!-- Row 2: button sits below filter -->
            <a href="{{ url_for('new_project') }}" class="btn primary">
                Create New Project +
            </a>
        </div>
    </section>

    <!-- Main projects list -->
    <section class="content-section">
        {% if projects and projects|length > 0 %}
            <div class="info-grid">
                {% for project in projects %}
                    <a href="{{ url_for('project_detail', project_id=project.id) }}"
                       class="stache-card-link">
                        <article class="info-card">
                            <div class="stache-card-header">
                                <h2>{{ project.name }}</h2>
                                <span class="chevron">❯</span>
                            </div>

                            <p style="font-size: 0.9rem; margin-top: 0.4rem; color: #9ca3af;">
                                <strong>Status:</strong>
                                {% if project.status == 'completed' %}
                                    Completed
                                {% elif project.status == 'in-progress' %}
                                    In progress
                                {% else %}
                                    {{ project.status|capitalize }}
                                {% endif %}

                                {% if project.stache %}
                                    · <strong>Stache:</strong> {{ project.stache.name }}
                                {% endif %}
                            </p>

                            {% if project.description %}
                                <p style="margin-top: 0.6rem;">
                                    {{ project.description }}
                                </p>
                            {% endif %}
                        </article>
                    </a>
                {% endfor %}
            </div>
        {% else %}
            <article class="info-card">
                <h2>No projects yet</h2>
                <p>
                    You can use this page to manage things like:
                </p>
                <ul>
                    <li>Decluttering drives and storage bins</li>
                    <li>Pre-trip packing checklists</li>
                    <li>Gear repairs and upgrades</li>
                </ul>
            </article>
        {% endif %}
    </section>
{% endblock %}

